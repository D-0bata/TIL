# いちばんやさしいGit&GitHubの教本

## GitとGitHub
- Git：ファイルのバージョン管理を行うためのツール、バージョン管理システム
- GitHub：Gitの仕組みを利用して、インターネット上でのスムーズな共同作業を可能にしたWebサービス

## Git
### Git管理対象のファイルの状態
- ワークツリー：変更するファイルを保持する場所（作業場所）
- ステージングエリア：コミットするファイルを登録する場所（待機場所）
- Gitディレクトリ：コミットを格納する場所（格納場所）

### homebrew経由のGitのインストール
- homebrewのバージョン確認（※別途インストール要）\
  => brew --version
- homebrewのアップデート\
  => brew update
- Gitのバージョン確認（アップデート前）\
  => git --version
- HomebrewでGitを管理\
  => brew install git
- Gitをアップデート\
  => brew upgrade git
- Gitのバージョン確認（アップデート後）\
  => git --version

### Gitの設定方法（~/.gitconfigファイル）
- 設定値の一覧を確認する\
  => git config --list

- 設定項目名（aaa）に設定値（xxx）を設定する\
  => git config --global aaa xxx
  
  1. ユーザー名を設定する\
    => git config --global user.name xxx
  2. メールアドレスを設定する\
    => git config --global user.email yyy
  3. 利用するエディターを設定する
    => git config --global core.editor "code --wait"\
    ※事前に「code（VSCodeのこと）」をPATHに登録する必要がある。

- 特定の設定値（user.name）を確認する\
  => git config user.name

### Gitコマンド
- リポジトリの作成
  1. git init：ローカルリポジトリを作成する

- コミットの作成
  1. git add：ステージングエリアに変更を登録する（変更したファイルをまとめて登録する場合は-Aオプション要）
  2. git commit：コミットを作成する
  3. git rm：Git管理下のファイルやディレクトリを削除する（ディレクトリが対象の場合は-rオプション要）\
  （対象ファイルの削除とファイルが削除されたという状態をステージングエリアに登録する、rm + git add相当のコマンド）

- 状態の復元
  1. git checkout：ワークツリーの変更を直前のコミット、または直前のステージングエリアへの登録に戻す\
    => git checkout -- xxx：直前のコミット時の状態に戻す（※ステージングエリア登録前のとき）
  2. git reset：ステージングエリアへの登録だけを取り消す（ワークツリー内ファイルの変更は取り消されない）\
    => git reset HEAD xxx：git addに相当する操作のみ取り消される\
    （※ワークツリー内ファイルの変更も取り消すときは、続いて「git checkout -- xxx」を実行する）

- 状態の確認
  1. git status：ローカルリポジトリの状態を確認する
  2. git diff：各エリアの差分を確認する\
    => git diff：ワークツリーとステージングエリアの差分を確認する\
    => git diff --cached：ステージングエリアとGitディレクトリの差分をかくにんする
  3. git log：コミット履歴を確認する（ファイル差分の情報が必要なときは-pオプション要）

- まとめ図
  |ワークツリー    |                     |ステージングエリア  |          |Gitディレクトリ     |            |
  |:------------:|:-------------------:|:---------------:|:--------:|:----------------:|:----------:|
  |編集したファイル|=>                    |ステージングエリアに|=>        |コミットされたファイル|            |
  |              |                      |登録されたファイル |          |                  |            |
  |              |git add               |                |git commit|                  |            |
  |              |git rm                |                |コミットする|                  |            |
  |              |コミットするファイルを登録|                 |          |                  |            |
  |              |git status            |                |git status|                  |git log     |
  |              |git diff              |                |git diff  |                  |コミット履歴を|
  |              |状態を確認              |                |状態を確認  |                  |確認        |

### Gitで管理しないファイルの設定
- .gitignoreファイルに対象ファイル、対象ディレクトリへのパスを記述する

  例：dir1下のfile1.md、dir2下全て、.logファイル全てをGit管理対象外にするとき
  ```
  dir1/file1.md
  dir2/
  *.log
  ```

## GitHub
### GitHub上のリポジトリの複製
- フォーク：他人のリポジトリを自分のGitHubアカウント下にコピーする\
  （本来は、適切な変更を加えてフォーク元に変更内容を反映する）
- クローン：自分のGitHubアカウント下のリモートリポジトリをローカルリポジトリにコピーする\
  （適切な変更を加えてクローン元に変更内容を反映する）

- git remote -v：リモートリポジトリの設定の確認や変更が可能\
  => コマンド結果の「origin」はクローン元のリポジトリを表す名前

### ブランチの操作コマンド
- git branch：ブランチの操作を行う\
  => git branch：ブランチの状態、使用中のブランチを確認する（使用中のブランチの確認はgit statusコマンドでも可能）\
  => git branch xxx：ブランチを作成する（xxx：作成するブランチ名）
- git checkout：ワークツリーの変更の取り消し以外にも、ブランチの切り替えが可能（多機能）\
  => git checkout xxx：ブランチの切り替えを行う（xxx：切り替え先のブランチ名）\
  => git checkout -b xxx：ブランチを作成してそのブランチへの切り替えを行う（xxx：切り替え先のブランチ名）
- git diff xxx：ブランチ間の差分を比較する（xxx：比較先のブランチ名）

### ローカルリポジトリの内容をリモートリポジトリに反映（プルリクエスト）
- git push xxx yyy：リモートリポジトリにローカルリポジトリの内容が反映される（この場合、ブランチがリモートリポジトリに作成される）\
  （xxx：プッシュ先のリモートリポジトリの名前、yyy：プッシュするブランチ名）
- プルリクエスト：ベースブランチ（ブランチ作成元の本流ブランチ）に変更取り込みを依頼すること

### リモートリポジトリの内容をローカルリポジトリに反映
- git pull xxx yyy：ローカルリポジトリにリモートリポジトリの内容が反映される（ワークツリーも置き換えられる）\
  （xxx：プル元のリモートリポジトリの名前、yyy：プルするブランチ名）
- git fetch xxx：ローカルリポジトリにリモートリポジトリの内容が反映される（**ワークツリーは置き換えられない**）\
  （xxx：フェッチ元のリモートリポジトリの名前、git pull = git fetch + git mergeに相当する）
- git merge xxx：他のブランチからの変更を取り込む（xxx：変更取得元のブランチ（通常はmaster））

  例：masterブランチを最新化し、aaaブランチにマージする
  ```
  git checkout master       masterブランチに移動する
  git pull origin master    masterブランチを最新化する
  git checkout aaa          aaaブランチに移動する
  git merge master          aaaブランチにmasterブランチの内容を取り込む
  ```
